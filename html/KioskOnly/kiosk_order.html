<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Water - RJane Water Kiosk</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary: #0088cc;
            --primary-dark: #006699;
            --secondary: #1ec8ff;
            --light: #f9feff;
            --dark: #263238;
            --success: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
            --gray: #f0f2f5;
            --gray-dark: #a0a0a0;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--light);
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background-image: linear-gradient(135deg, rgba(29, 162, 216, 0.05) 0%, rgba(46, 204, 113, 0.05) 100%);
        }
        
        .kiosk-container {
            width: 100%;
            max-width: 900px;
            height: 100%;
            max-height: 700px;
            background: white;
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
            display: flex;
            flex-direction: column;
            position: relative;
        }
        
        .kiosk-header {
            background: var(--primary);
            padding: 24px;
            position: relative;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .kiosk-header h1 {
            color: white;
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 0;
        }
        
        .back-button {
            position: absolute;
            left: 24px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .back-button:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .kiosk-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 0;
            overflow: hidden;
        }
        
        .order-tabs {
            display: flex;
            background: var(--light);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .tab {
            flex: 1;
            font-size: 14px;
            padding: 12px 8px;
            text-align: center;
            cursor: pointer;
            font-weight: 500;
            color: var(--dark);
            position: relative;
            transition: all 0.3s;
        }
        
        .tab.active {
            color: var(--primary);
            background: white;
        }
        
        .tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--primary);
        }
        
        .tab-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            padding-bottom: 40px;
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }
        
        .products-grid + .section-title {
            margin-top: 40px;
        }
        
        .product-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            border: 1px solid var(--gray);
            display: flex;
            flex-direction: column;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .product-card:hover, .product-card.selected {
            border-color: var(--primary);
            box-shadow: 0 5px 15px rgba(0, 136, 204, 0.1);
        }
        
        .product-card.selected {
            background: rgba(0, 136, 204, 0.05);
        }
        
        .product-img {
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 12px;
        }
        
        .product-img i {
            font-size: 64px;
            color: var(--primary);
        }
        
        .product-image {
            max-height: 120px;
            max-width: 100%;
            object-fit: contain;
        }
        
        .product-info h3 {
            font-size: 16px;
            margin-bottom: 4px;
            color: var(--dark);
        }
        
        .product-info .price {
            font-weight: bold;
            color: var(--primary-dark);
            font-size: 18px;
        }
        
        .product-info .description {
            color: var(--gray-dark);
            font-size: 13px;
            margin-top: 6px;
        }
        
        .product-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--gray);
        }
        
        .quantity-inline {
            display: flex;
            align-items: center;
        }
        
        .qty-small-btn {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: 1px solid var(--gray);
            background: white;
            color: var(--dark);
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .qty-inline-value {
            width: 28px;
            text-align: center;
            font-size: 14px;
            font-weight: 500;
        }
        
        .btn-sm {
            padding: 8px 16px;
            font-size: 14px;
            border-radius: 6px;
        }
        
        /* Customer form */
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }
        
        .form-group {
            margin-bottom: 16px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-size: 14px;
            color: var(--dark);
        }
        
        .form-group input, 
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--gray);
            border-radius: 8px;
            font-size: 15px;
            transition: border 0.2s;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border-color: var(--primary);
            outline: none;
        }
        
        .form-grid .form-group:nth-child(5) {
            grid-column: span 2;
        }
        
        /* Quantity */
        .quantity-control {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 24px;
        }
        
        .quantity-label {
            font-weight: 500;
            color: var(--dark);
        }
        
        .quantity-buttons {
            display: flex;
            align-items: center;
        }
        
        .qty-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: none;
            background: var(--primary);
            color: white;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .qty-value {
            width: 50px;
            text-align: center;
            font-size: 18px;
            font-weight: 500;
        }
        
        /* Order summary */
        .order-summary {
            background: var(--light);
            border-radius: 12px;
            padding: 20px;
        }
        
        .summary-header {
            font-size: 18px;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 16px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            padding-bottom: 10px;
        }
        
        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .summary-item.total {
            font-weight: bold;
            font-size: 18px;
            border-top: 1px dashed rgba(0, 0, 0, 0.1);
            margin-top: 10px;
            padding-top: 10px;
        }
        
        .customer-details {
            margin-left: 20px;
            margin-top: 20px;
            font-size: 14px;
        }
        
        .customer-details h4 {
            font-size: 16px;
            margin-bottom: 8px;
            color: var(--dark);
        }
        
        /* Navigation buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            padding: 16px 24px;
            background: var(--light);
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 500;
            font-size: 16px;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
        }
        
        .btn-secondary {
            background: var(--gray);
            color: var(--dark);
        }
        
        .btn-secondary:hover {
            background: #e0e0e0;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .btn-success:hover {
            background: #27ae60;
        }
        
        /* Success page */
        .success-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px;
            height: 100%;
        }
        
        .success-icon {
            font-size: 80px;
            color: var(--success);
            margin-bottom: 24px;
        }
        
        .success-content h2 {
            font-size: 28px;
            color: var(--dark);
            margin-bottom: 16px;
        }
        
        .success-content p {
            color: var(--gray-dark);
            font-size: 18px;
            max-width: 500px;
            margin-bottom: 30px;
        }
        
        .order-number {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary);
            padding: 10px 30px;
            background: var(--light);
            border-radius: 8px;
            margin: 20px 0;
        }
        
        /* Hide tabs initially */
        #tab-customer, #tab-review, #tab-success, #tab-payment {
            display: none;
        }
        
        /* Shopping cart styles */
.cart-container {
    background: white;
    border-radius: 12px;
    padding: 16px;
    margin-top: 24px;
    border: 1px solid var(--gray);
}

.cart-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 10px;
    border-bottom: 1px solid var(--gray);
    margin-bottom: 10px;
}

.cart-header h3 {
    font-size: 18px;
    color: var(--dark);
    margin: 0;
}

.cart-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 0;
    border-bottom: 1px solid var(--gray);
}

.cart-item-info {
    display: flex;
    flex-direction: column;
}

.cart-item-name {
    font-weight: 500;
}

.cart-item-price {
    color: var(--primary-dark);
    font-size: 14px;
}

.cart-item-quantity {
    background: var(--primary-light);
    color: var(--primary);
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 14px;
    min-width: 35px;
    text-align: center;
}

.remove-item {
    color: var(--danger);
    background: none;
    border: none;
    cursor: pointer;
    font-size: 16px;
    padding: 5px;
}

.cart-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 10px;
    margin-top: 10px;
    font-weight: bold;
}

.empty-cart {
    text-align: center;
    padding: 20px;
    color: var(--gray-dark);
    font-style: italic;
}

/* Payment step styles */
.payment-container {
    display: grid;
    grid-template-columns: 1fr;
    gap: 24px;
}

@media (min-width: 768px) {
    .payment-container {
        grid-template-columns: 1.5fr 1fr;
    }
}

.payment-summary {
    background: var(--light);
    border-radius: 12px;
    padding: 20px;
}

.adjustments-section {
    margin: 20px 0;
    padding: 15px;
    border-radius: 8px;
    background-color: rgba(255, 255, 255, 0.5);
}

.input-with-icon {
    display: flex;
    align-items: center;
    gap: 8px;
}

.input-with-icon select {
    padding: 10px;
    border: 1px solid var(--gray);
    border-radius: 8px;
}

.input-with-icon input {
    padding: 10px;
    border: 1px solid var(--gray);
    border-radius: 8px;
    width: 80px;
}

.peso-prefix {
    position: relative;
}

.peso-prefix input {
    padding-left: 30px;
    width: 100%;
}

.peso-prefix::before {
    content: '₱';
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--gray-dark);
    font-weight: 500;
}

#adjustments-list {
    margin-top: 15px;
}

.adjustment-item {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px dashed var(--gray);
}

.adjustment-item .remove-adjustment {
    color: var(--danger);
    background: none;
    border: none;
    cursor: pointer;
}

.change-calculation {
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px solid var(--gray);
}

.summary-item.change {
    font-size: 20px;
    font-weight: 700;
    color: var(--success);
}

.payment-methods {
    background: white;
    border-radius: 12px;
    padding: 20px;
    border: 1px solid var(--gray);
}

.payment-methods h4 {
    margin-bottom: 15px;
    color: var(--dark);
    text-align: center;
}

.quick-payment-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
}

.quick-payment {
    padding: 15px;
    border: 1px solid var(--gray);
    border-radius: 8px;
    background: white;
    font-size: 18px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

.quick-payment:hover {
    background: var(--light);
    border-color: var(--primary);
}

.quick-payment.exact-amount {
    grid-column: span 2;
    background-color: var(--primary-light);
    color: var(--primary);
}

.payment-input {
    margin-top: 20px;
}

/* Add these styles to your existing CSS */
.section-title {
    margin: 20px 0 15px;
    color: var(--primary-dark);
    font-size: 20px;
    border-bottom: 1px solid var(--gray);
    padding-bottom: 8px;
}
    </style>
</head>
<body>
    <div class="kiosk-container">
        <!-- Header with back button -->
        <header class="kiosk-header">
            <button class="back-button" id="back-button">
                <i class="fas fa-arrow-left"></i>
            </button>
            <h1>Order Water</h1>
        </header>

        <!-- Main Content -->
        <main class="kiosk-main">
            <div class="order-tabs">
                <div class="tab active" data-tab="products">1. Select Product</div>
                <div class="tab" data-tab="customer">2. Your Details</div>
                <div class="tab" data-tab="payment">3. Payment</div>
                <div class="tab" data-tab="review">4. Review Order</div>
            </div>

            <!-- Tab Content -->
            <div class="tab-content" id="tab-products">
                <h3 class="section-title">Gallon Containers</h3>
                <div class="products-grid">
                    <!-- Product 1 -->
                    <div class="product-card" data-id="mineral" data-price="35.00">
                        <div class="product-img">
                            <img src="images/galon.png" alt="Mineral Water Gallon" class="product-image">
                        </div>
                        <div class="product-info">
                            <h3>Mineral Water</h3>
                            <div class="price">₱35.00</div>
                            <div class="description">Natural minerals and electrolytes</div>
                            <div class="product-actions">
                                <div class="quantity-inline">
                                    <button class="qty-small-btn decrease-inline">-</button>
                                    <span class="qty-inline-value">1</span>
                                    <button class="qty-small-btn increase-inline">+</button>
                                </div>
                                <button class="btn btn-sm btn-primary add-to-cart">Add</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Product 2 -->
                    <div class="product-card" data-id="purified" data-price="25.00">
                        <div class="product-img">
                            <img src="images/galon.png" alt="Purified Water Gallon" class="product-image">
                        </div>
                        <div class="product-info">
                            <h3>Purified Water</h3>
                            <div class="price">₱25.00</div>
                            <div class="description">Clean and pure drinking water</div>
                            <div class="product-actions">
                                <div class="quantity-inline">
                                    <button class="qty-small-btn decrease-inline">-</button>
                                    <span class="qty-inline-value">1</span>
                                    <button class="qty-small-btn increase-inline">+</button>
                                </div>
                                <button class="btn btn-sm btn-primary add-to-cart">Add</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Product 3 -->
                    <div class="product-card" data-id="alkaline" data-price="45.00">
                        <div class="product-img">
                            <img src="images/galon.png" alt="Alkaline Water Gallon" class="product-image">
                        </div>
                        <div class="product-info">
                            <h3>Alkaline Water</h3>
                            <div class="price">₱45.00</div>
                            <div class="description">Higher pH for balanced health</div>
                            <div class="product-actions">
                                <div class="quantity-inline">
                                    <button class="qty-small-btn decrease-inline">-</button>
                                    <span class="qty-inline-value">1</span>
                                    <button class="qty-small-btn increase-inline">+</button>
                                </div>
                                <button class="btn btn-sm btn-primary add-to-cart">Add</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Product 4 -->
                    <div class="product-card" data-id="distilled" data-price="30.00">
                        <div class="product-img">
                            <img src="images/galon.png" alt="Distilled Water Gallon" class="product-image">
                        </div>
                        <div class="product-info">
                            <h3>Distilled Water</h3>
                            <div class="price">₱30.00</div>
                            <div class="description">Pure H2O with no minerals</div>
                            <div class="product-actions">
                                <div class="quantity-inline">
                                    <button class="qty-small-btn decrease-inline">-</button>
                                    <span class="qty-inline-value">1</span>
                                    <button class="qty-small-btn increase-inline">+</button>
                                </div>
                                <button class="btn btn-sm btn-primary add-to-cart">Add</button>
                            </div>
                        </div>
                    </div>
                </div>

                <h3 class="section-title">Plastic Bottles</h3>
                <div class="products-grid">
                    <!-- Bottle Product 1 -->
                    <div class="product-card" data-id="mineral-bottle" data-price="15.00">
                        <div class="product-img">
                            <img src="images/plastic-bottle.png" alt="Mineral Water Bottle" class="product-image">
                        </div>
                        <div class="product-info">
                            <h3>Mineral Water Bottle</h3>
                            <div class="price">₱15.00</div>
                            <div class="description">500ml bottle with minerals</div>
                            <div class="product-actions">
                                <div class="quantity-inline">
                                    <button class="qty-small-btn decrease-inline">-</button>
                                    <span class="qty-inline-value">1</span>
                                    <button class="qty-small-btn increase-inline">+</button>
                                </div>
                                <button class="btn btn-sm btn-primary add-to-cart">Add</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Bottle Product 2 -->
                    <div class="product-card" data-id="purified-bottle" data-price="12.00">
                        <div class="product-img">
                            <img src="images/plastic-bottle.png" alt="Purified Water Bottle" class="product-image">
                        </div>
                        <div class="product-info">
                            <h3>Purified Water Bottle</h3>
                            <div class="price">₱12.00</div>
                            <div class="description">500ml clean purified water</div>
                            <div class="product-actions">
                                <div class="quantity-inline">
                                    <button class="qty-small-btn decrease-inline">-</button>
                                    <span class="qty-inline-value">1</span>
                                    <button class="qty-small-btn increase-inline">+</button>
                                </div>
                                <button class="btn btn-sm btn-primary add-to-cart">Add</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Bottle Product 3 -->
                    <div class="product-card" data-id="alkaline-bottle" data-price="18.00">
                        <div class="product-img">
                            <img src="images/plastic-bottle.png" alt="Alkaline Water Bottle" class="product-image">
                        </div>
                        <div class="product-info">
                            <h3>Alkaline Water Bottle</h3>
                            <div class="price">₱18.00</div>
                            <div class="description">500ml high pH water</div>
                            <div class="product-actions">
                                <div class="quantity-inline">
                                    <button class="qty-small-btn decrease-inline">-</button>
                                    <span class="qty-inline-value">1</span>
                                    <button class="qty-small-btn increase-inline">+</button>
                                </div>
                                <button class="btn btn-sm btn-primary add-to-cart">Add</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Bottle Product 4 -->
                    <div class="product-card" data-id="distilled-bottle" data-price="14.00">
                        <div class="product-img">
                            <img src="images/plastic-bottle.png" alt="Distilled Water Bottle" class="product-image">
                        </div>
                        <div class="product-info">
                            <h3>Distilled Water Bottle</h3>
                            <div class="price">₱14.00</div>
                            <div class="description">500ml pure distilled water</div>
                            <div class="product-actions">
                                <div class="quantity-inline">
                                    <button class="qty-small-btn decrease-inline">-</button>
                                    <span class="qty-inline-value">1</span>
                                    <button class="qty-small-btn increase-inline">+</button>
                                </div>
                                <button class="btn btn-sm btn-primary add-to-cart">Add</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="cart-container" id="cart-container">
                    <div class="cart-header">
                        <h3>Your Order</h3>
                        <span class="cart-count">0</span>
                    </div>
                    <div id="cart-items">
                        <!-- Cart items will be displayed here -->
                        <div class="empty-cart">Cart is empty. Please add products.</div>
                    </div>
                    <div class="cart-footer">
                        <span>Total:</span>
                        <span id="cart-total">₱0.00</span>
                    </div>
                </div>
            </div>
            
            <!-- Customer Details Tab -->
            <div class="tab-content" id="tab-customer">
                <form id="customer-form">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="name">Full Name</label>
                            <input type="text" id="name" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" id="phone" required>
                        </div>
                        <div class="form-group">
                            <label for="payment">Payment Option</label>
                            <select id="payment" required>
                                <option value="cash">Cash</option>
                                <option value="gcash">Gcash</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="delivery">Delivery Option</label>
                            <select id="delivery" required>
                                <option value="pickup">Pick-up</option>
                                <option value="delivery">Home Delivery</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="address">Address (For Delivery)</label>
                            <textarea id="address" rows="3"></textarea>
                        </div>
                    </div>
                </form>
            </div>
            
            <!-- Order Review Tab -->
            <div class="tab-content" id="tab-review">
                <div class="order-summary">
                    <div class="summary-header">Order Summary</div>
                    <div id="summary-product-name" class="summary-item">
                        <span>Product:</span>
                        <span>Mineral Water</span>
                    </div>
                    <div id="summary-quantity" class="summary-item">
                        <span>Quantity:</span>
                        <span>1</span>
                    </div>
                    <div id="summary-price" class="summary-item">
                        <span>Price per unit:</span>
                        <span>₱35.00</span>
                    </div>
                    <div id="summary-delivery" class="summary-item">
                        <span>Delivery:</span>
                        <span>Pick-up</span>
                    </div>
                    <div id="summary-total" class="summary-item total">
                        <span>Total:</span>
                        <span>₱35.00</span>
                    </div>
                </div>
                
                <div class="customer-details">
                    <h4>Customer Information</h4>
                    <p id="summary-customer-name">Name: John Doe</p>
                    <p id="summary-customer-phone">Phone: 09123456789</p>
                    <p id="summary-customer-email">Email: john@example.com</p>
                    <p id="summary-customer-address">Address: N/A (Pick-up)</p>
                </div>
            </div>
            
            <!-- Payment Tab -->
            <div class="tab-content" id="tab-payment">
                <div class="payment-container">
                    <div class="payment-summary">
                        <div class="summary-header">Payment Details</div>
                        <div class="summary-item">
                            <span>Order Total:</span>
                            <span id="payment-order-total">₱0.00</span>
                        </div>
                        
                        <div class="adjustments-section">
                            <div class="form-group">
                                <label for="discount">Discount/Charge:</label>
                                <div class="input-with-icon">
                                    <select id="adjustment-type">
                                        <option value="discount">Discount</option>
                                        <option value="charge">Extra Charge</option>
                                    </select>
                                    <input type="number" id="adjustment-amount" min="0" step="1" value="0">
                                    <select id="adjustment-unit">
                                        <option value="percent">%</option>
                                        <option value="fixed">₱</option>
                                    </select>
                                    <button class="btn btn-sm btn-primary" id="apply-adjustment">Apply</button>
                                </div>
                            </div>
                            
                            <div id="adjustments-list">
                                <!-- Adjustments will be listed here -->
                            </div>
                        </div>
                        
                        <div class="summary-item total">
                            <span>Final Amount Due:</span>
                            <span id="final-amount">₱0.00</span>
                        </div>
                        
                        <div class="payment-input">
                            <div class="form-group">
                                <label for="payment-amount">Payment Amount:</label>
                                <div class="input-with-icon peso-prefix">
                                    <input type="number" id="payment-amount" min="0" step="1" placeholder="Enter amount">
                                </div>
                            </div>
                            
                            <div class="change-calculation">
                                <div class="summary-item change">
                                    <span>Change:</span>
                                    <span id="change-amount">₱0.00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="payment-methods">
                        <h4>Quick Payment</h4>
                        <div class="quick-payment-grid">
                            <button class="quick-payment" data-amount="100">₱100</button>
                            <button class="quick-payment" data-amount="200">₱200</button>
                            <button class="quick-payment" data-amount="500">₱500</button>
                            <button class="quick-payment" data-amount="1000">₱1000</button>
                            <button class="quick-payment exact-amount">Exact Amount</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Order Success Tab -->
            <div class="tab-content" id="tab-success">
                <div class="success-content">
                    <div class="success-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h2>Order Placed Successfully!</h2>
                    <p>Thank you for your order. Your water will be ready for pickup/delivery shortly.</p>
                    
                    <div class="order-number">
                        Order #: <span id="order-number">WR-123456</span>
                    </div>
                    
                    <p>Please use this order number to check your order status.</p>
                </div>
            </div>
        </main>

        <!-- Navigation Buttons -->
        <div class="nav-buttons">
            <button class="btn btn-secondary" id="prev-btn">Back</button>
            <button class="btn btn-primary" id="next-btn">Continue</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elements
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            const backButton = document.getElementById('back-button');
            const nextBtn = document.getElementById('next-btn');
            const prevBtn = document.getElementById('prev-btn');
            const productCards = document.querySelectorAll('.product-card');
            const cartItems = document.getElementById('cart-items');
            const cartCount = document.querySelector('.cart-count');
            const cartTotal = document.getElementById('cart-total');
            
            // Variables
            let currentTab = 0;
            const tabOrder = ['products', 'customer', 'payment', 'review', 'success'];
            let selectedProduct = null;
            let quantity = 1;
            
                        // New shopping cart array
            const cart = [];

            // Order data
            const orderData = {
                product: null,
                price: 0,
                quantity: 1,
                customer: {
                    name: '',
                    phone: '',
                    email: '',
                    delivery: 'pickup',
                    address: '',
                    payment: 'cash' // Add this default value
                }
            };

            // Initialize product controls
            productCards.forEach(card => {
                const id = card.dataset.id;
                const price = parseFloat(card.dataset.price);
                const name = card.querySelector('.product-info h3').textContent;
                const qtyValue = card.querySelector('.qty-inline-value');
                const decreaseBtn = card.querySelector('.decrease-inline');
                const increaseBtn = card.querySelector('.increase-inline');
                const addBtn = card.querySelector('.add-to-cart');
                
                let qty = 1;
                
                // Quantity controls
                increaseBtn.addEventListener('click', function(e) {
                    e.stopPropagation(); // Prevent card selection
                    qty = Math.min(10, qty + 1);
                    qtyValue.textContent = qty;
                });
                
                decreaseBtn.addEventListener('click', function(e) {
                    e.stopPropagation(); // Prevent card selection
                    qty = Math.max(1, qty - 1);
                    qtyValue.textContent = qty;
                });
                
                // Add to cart
                addBtn.addEventListener('click', function(e) {
                    e.stopPropagation(); // Prevent card selection
                    
                    // Check if product already in cart
                    const existingItem = cart.find(item => item.id === id);
                    
                    if (existingItem) {
                        // Update quantity if already in cart
                        existingItem.quantity += qty;
                    } else {
                        // Add new item to cart
                        cart.push({
                            id: id,
                            name: name,
                            price: price,
                            quantity: qty
                        });
                    }
                    
                    // Reset quantity to 1
                    qty = 1;
                    qtyValue.textContent = qty;
                    
                    // Update cart display
                    updateCart();
                    
                    // Enable next button if cart has items
                    nextBtn.disabled = cart.length === 0;
                });
            });
            
            // Functions
            function showTab(index) {
                // Hide all tabs
                tabContents.forEach(tab => {
                    tab.style.display = 'none';
                });
                
                // Update active tab indicator
                tabs.forEach((tab, idx) => {
                    if (idx === index) {
                        tab.classList.add('active');
                    } else {
                        tab.classList.remove('active');
                    }
                });
                
                // Show current tab
                document.getElementById(`tab-${tabOrder[index]}`).style.display = 'block';
                
                // Update navigation buttons
                if (index === 0) {
                    prevBtn.style.visibility = 'hidden';
                    nextBtn.textContent = 'Continue';
                    nextBtn.className = 'btn btn-primary';
                } else if (index === tabOrder.length - 1) {
                    // Success tab
                    nextBtn.textContent = 'New Order';
                    nextBtn.className = 'btn btn-success';
                    prevBtn.style.visibility = 'hidden';
                } else if (index === tabOrder.length - 2) {
                    // Payment tab
                    prevBtn.style.visibility = 'visible';
                    nextBtn.textContent = 'Place Order';
                    nextBtn.className = 'btn btn-success';
                } else {
                    prevBtn.style.visibility = 'visible';
                    nextBtn.textContent = 'Continue';
                    nextBtn.className = 'btn btn-primary';
                }
                
                // Enable/disable next button for product selection
                if (index === 0) {
                    nextBtn.disabled = cart.length === 0;
                }
                
                // Update current tab
                currentTab = index;
                
                // Add this to the conditional for the Review tab/Next button changes:
                if (index === 3) { // Payment tab
                    prevBtn.style.visibility = 'visible';
                    nextBtn.textContent = 'Confirm Payment';
                    nextBtn.className = 'btn btn-success';
                    
                    // Disable the next button if payment amount is insufficient
                    const finalAmount = calculateFinalAmount();
                    const paymentAmount = parseFloat(paymentAmountInput.value) || 0;
                    nextBtn.disabled = paymentAmount < finalAmount;
                }
            }
            
            function updateSummary() {
                // Clear existing summary items
    const summaryEl = document.querySelector('.order-summary');
    // Keep only the header
    const headerEl = summaryEl.querySelector('.summary-header');
    summaryEl.innerHTML = '';
    summaryEl.appendChild(headerEl);
    
    // Add each product from the cart
    cart.forEach(item => {
        const itemRow = document.createElement('div');
        itemRow.className = 'summary-item';
        itemRow.innerHTML = `
            <span>${item.quantity}x ${item.name}</span>
            <span>₱${(item.price * item.quantity).toFixed(2)}</span>
        `;
        summaryEl.appendChild(itemRow);
    });
    
    // Add delivery information
    const deliveryEl = document.createElement('div');
    deliveryEl.id = 'summary-delivery';
    deliveryEl.className = 'summary-item';
    deliveryEl.innerHTML = `
        <span>Delivery:</span>
        <span>${orderData.customer.delivery === 'pickup' ? 'Pick-up' : 'Home Delivery'}</span>
    `;
    summaryEl.appendChild(deliveryEl);
    
    // Add payment information
    const paymentEl = document.createElement('div');
    paymentEl.className = 'summary-item';
    paymentEl.innerHTML = `
        <span>Payment Method:</span>
        <span>${orderData.customer.payment === 'cash' ? 'Cash' : 'GCash'}</span>
    `;
    summaryEl.appendChild(paymentEl);
    
    // Calculate total
    const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    
    // Add total row
    const totalEl = document.createElement('div');
    totalEl.id = 'summary-total';
    totalEl.className = 'summary-item total';
    totalEl.innerHTML = `
        <span>Total:</span>
        <span>₱${total.toFixed(2)}</span>
    `;
    summaryEl.appendChild(totalEl);
    
    // Update customer info
    document.getElementById('summary-customer-name').textContent = `Name: ${orderData.customer.name}`;
    document.getElementById('summary-customer-phone').textContent = `Phone: ${orderData.customer.phone}`;
    document.getElementById('summary-customer-email').textContent = `Email: ${orderData.customer.email || 'N/A'}`;
    
    if (orderData.customer.delivery === 'delivery') {
        document.getElementById('summary-customer-address').textContent = `Address: ${orderData.customer.address}`;
    } else {
        document.getElementById('summary-customer-address').textContent = 'Address: N/A (Pick-up)';
    }
            }
            
            function generateOrderNumber() {
                const timestamp = new Date().getTime().toString().slice(-6);
                return `WR-${timestamp}`;
            }
            
            function validateCustomerForm() {
                const name = document.getElementById('name').value.trim();
                const phone = document.getElementById('phone').value.trim();
                const email = document.getElementById('email') ? document.getElementById('email').value.trim() : '';
                const delivery = document.getElementById('delivery').value;
                const address = document.getElementById('address').value.trim();
                const payment = document.getElementById('payment').value; // Add this line
                
                if (!name) {
                    alert('Please enter your name');
                    return false;
                }
                
                if (!phone) {
                    alert('Please enter your phone number');
                    return false;
                }
                
                if (delivery === 'delivery' && !address) {
                    alert('Please enter your delivery address');
                    return false;
                }
                
                // Save data
                orderData.customer.name = name;
                orderData.customer.phone = phone;
                orderData.customer.email = email;
                orderData.customer.delivery = delivery;
                orderData.customer.address = address;
                orderData.customer.payment = payment; // Add this line
                
                return true;
            }
            
            function updateCart() {
    const cartItemsEl = document.getElementById('cart-items');
    const cartCountEl = document.querySelector('.cart-count');
    const cartTotalEl = document.getElementById('cart-total');
    
    // Clear current items
    cartItemsEl.innerHTML = '';
    
    if (cart.length === 0) {
        cartItemsEl.innerHTML = '<div class="empty-cart">Cart is empty. Please add products.</div>';
        cartCountEl.textContent = '0';
        cartTotalEl.textContent = '₱0.00';
        return;
    }
    
    // Update cart count
    cartCountEl.textContent = cart.reduce((total, item) => total + item.quantity, 0);
    
    // Calculate total
    let total = 0;
    
    // Add each item to cart display
    cart.forEach((item, index) => {
        const itemTotal = item.price * item.quantity;
        total += itemTotal;
        
        const itemEl = document.createElement('div');
        itemEl.className = 'cart-item';
        itemEl.innerHTML = `
            <div class="cart-item-info">
                <span class="cart-item-name">${item.name}</span>
                <span class="cart-item-price">₱${item.price.toFixed(2)}</span>
            </div>
            <span class="cart-item-quantity">${item.quantity}x</span>
            <button class="remove-item" data-index="${index}">
                <i class="fas fa-times"></i>
            </button>
        `;
        cartItemsEl.appendChild(itemEl);
    });
    
    // Update total
    cartTotalEl.textContent = `₱${total.toFixed(2)}`;
    
    // Add remove functionality
    document.querySelectorAll('.remove-item').forEach(btn => {
        btn.addEventListener('click', function() {
            const index = parseInt(this.dataset.index);
            cart.splice(index, 1);
            updateCart();
            nextBtn.disabled = cart.length === 0;
        });
    });
}

            // Event Listeners
            
            // Back button to main kiosk screen
            backButton.addEventListener('click', function() {
                window.location.href = 'kios.html';
            });
            
            // Tab navigation
            nextBtn.addEventListener('click', function() {
                if (currentTab === 0 && cart.length === 0) {
                    alert('Please add at least one product to continue');
                    return;
                }
                
                if (currentTab === 1) {
                    // Validate customer form
                    if (!validateCustomerForm()) {
                        return;
                    }
                }
                
                if (currentTab === 2) {
                    // Before showing payment tab, update the summary
                    updateSummary();
                }
                
                if (currentTab === 3) {
                    // Place order functionality
                    const orderNumber = generateOrderNumber();
                    document.getElementById('order-number').textContent = orderNumber;
                    
                    // Add total to success message
                    const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                    const successMessage = document.querySelector('.success-content p');
                    successMessage.innerHTML = `Thank you for your order worth <strong>₱${total.toFixed(2)}</strong>. Your water will be ready for pickup/delivery shortly.`;
                }
                
                if (currentTab === 4) {
                    // Return to main kiosk
                    window.location.href = 'kios.html';
                    return;
                }
                
                showTab(Math.min(tabOrder.length - 1, currentTab + 1));
            });
            
            prevBtn.addEventListener('click', function() {
                showTab(Math.max(0, currentTab - 1));
            });
            
            // Show delivery address field only when delivery option selected
            document.getElementById('delivery').addEventListener('change', function() {
                const addressGroup = document.getElementById('address').closest('.form-group');
                
                if (this.value === 'delivery') {
                    addressGroup.style.display = 'block';
                } else {
                    addressGroup.style.display = 'none';
                }
            });
            
            // Initialize
            showTab(0);
            nextBtn.disabled = true;
            
            // Initially hide address field
            document.getElementById('address').closest('.form-group').style.display = 'none';

            // Add after initializing tabs
            if (cartCount && cartTotal) {
                cartCount.textContent = '0';
                cartTotal.textContent = '₱0.00';
            }

            // Payment step functionality
            const adjustmentTypeSelect = document.getElementById('adjustment-type');
            const adjustmentAmountInput = document.getElementById('adjustment-amount');
            const adjustmentUnitSelect = document.getElementById('adjustment-unit');
            const applyAdjustmentBtn = document.getElementById('apply-adjustment');
            const adjustmentsList = document.getElementById('adjustments-list');
            const finalAmountSpan = document.getElementById('final-amount');
            const paymentAmountInput = document.getElementById('payment-amount');
            const changeAmountSpan = document.getElementById('change-amount');
            const quickPaymentButtons = document.querySelectorAll('.quick-payment');
            
            // Variables for payment calculations
            let orderTotal = 0;
            let adjustments = [];
            
            // Calculate final amount with adjustments
            function calculateFinalAmount() {
                let finalAmount = orderTotal;
                
                adjustments.forEach(adj => {
                    if (adj.type === 'discount') {
                        if (adj.unit === 'percent') {
                            finalAmount -= (orderTotal * adj.amount / 100);
                        } else {
                            finalAmount -= adj.amount;
                        }
                    } else { // charge
                        if (adj.unit === 'percent') {
                            finalAmount += (orderTotal * adj.amount / 100);
                        } else {
                            finalAmount += adj.amount;
                        }
                    }
                });
                
                // Ensure we don't go negative
                return Math.max(0, finalAmount);
            }
            
            // Update the payment display
            function updatePaymentDisplay() {
                const finalAmount = calculateFinalAmount();
                finalAmountSpan.textContent = `₱${finalAmount.toFixed(2)}`;
                
                // Calculate change if payment amount entered
                const paymentAmount = parseFloat(paymentAmountInput.value) || 0;
                const change = Math.max(0, paymentAmount - finalAmount);
                changeAmountSpan.textContent = `₱${change.toFixed(2)}`;
                
                // Enable/disable confirm payment button
                if (nextBtn && currentTab === 3) { // Payment tab
                    nextBtn.disabled = paymentAmount < finalAmount;
                }
            }
            
            // Add event listener for before showing payment tab
            nextBtn.addEventListener('click', function() {
                // If moving to payment tab, update payment info
                if (currentTab === 2) { // Review tab index
                    // Get the total from the review tab
                    const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                    orderTotal = total;
                    
                    // Reset adjustments
                    adjustments = [];
                    adjustmentsList.innerHTML = '';
                    
                    // Update payment display
                    document.getElementById('payment-order-total').textContent = `₱${total.toFixed(2)}`;
                    finalAmountSpan.textContent = `₱${total.toFixed(2)}`;
                    
                    // Reset payment input and change
                    paymentAmountInput.value = '';
                    changeAmountSpan.textContent = '₱0.00';
                    
                    // Update display
                    updatePaymentDisplay();
                }
            });
            
            // Apply adjustment
            applyAdjustmentBtn.addEventListener('click', function() {
                const type = adjustmentTypeSelect.value;
                const amount = parseFloat(adjustmentAmountInput.value) || 0;
                const unit = adjustmentUnitSelect.value;
                
                if (amount <= 0) return;
                
                // Add adjustment to list
                const adjustment = { type, amount, unit };
                adjustments.push(adjustment);
                
                // Create adjustment display
                const adjItem = document.createElement('div');
                adjItem.className = 'adjustment-item';
                
                let adjText = `${type === 'discount' ? 'Discount' : 'Extra Charge'}: `;
                adjText += unit === 'percent' ? `${amount}%` : `₱${amount.toFixed(2)}`;
                
                adjItem.innerHTML = `
                    <span>${adjText}</span>
                    <button class="remove-adjustment">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                
                adjustmentsList.appendChild(adjItem);
                
                // Remove adjustment functionality
                const removeBtn = adjItem.querySelector('.remove-adjustment');
                removeBtn.addEventListener('click', function() {
                    const index = adjustments.indexOf(adjustment);
                    if (index !== -1) {
                        adjustments.splice(index, 1);
                        adjItem.remove();
                        updatePaymentDisplay();
                    }
                });
                
                // Reset input
                adjustmentAmountInput.value = 0;
                
                // Update final amount
                updatePaymentDisplay();
            });
            
            // Payment amount input
            paymentAmountInput.addEventListener('input', updatePaymentDisplay);
            
            // Quick payment buttons
            quickPaymentButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    if (btn.classList.contains('exact-amount')) {
                        // Set to exact amount due
                        paymentAmountInput.value = calculateFinalAmount().toFixed(2);
                    } else {
                        // Set to button amount
                        paymentAmountInput.value = btn.dataset.amount;
                    }
                    
                    // Update display
                    updatePaymentDisplay();
                });
            });
        });
    </script>
</body>
</html>
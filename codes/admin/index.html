<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REssence Water Refilling Station</title>
    <link rel="stylesheet" href="../../Css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    
</head>

<body>
    <div id="navbar"></div>

    <script>
        fetch('NavBar.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('navbar').innerHTML = data;

                // Set active menu item based on current page
                const path = window.location.pathname.split('/').pop().toLowerCase();
                document.querySelectorAll('.menu a').forEach(link => {
                    if (link.getAttribute('href').toLowerCase() === path) {
                        link.parentElement.classList.add('active');
                    } else {
                        link.parentElement.classList.remove('active');
                    }
                });
            });
    </script>

    <div class="main-content">


        <div class="dashboard-header">
            <h2>Dashboard Overview</h2>
            <p class="date">Today: <span id="current-date">March 31, 2025</span></p>
        </div>

        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-icon water-icon">
                    <i class="fas fa-droplet"></i>
                </div>
                <div class="stat-details">
                    <h3>46</h3>
                    <p>Gallons Sold</p>
                </div>
                <div class="stat-progress">
                    <div class="progress-bar" style="width: 46%;"></div>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon client-icon">
                    <i class="fas fa-droplet"></i>
                </div>
                <div class="stat-details">
                    <h3>5</h3>
                    <p>Water Bottles Sold</p>
                </div>
                <div class="stat-progress">
                    <div class="progress-bar" style="width: 60%;"></div>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon order-icon">
                    <i class="fas fa-list-check"></i>
                </div>
                <div class="stat-details">
                    <h3>2</h3>
                    <p>Pending Orders</p>
                </div>
                <div class="stat-progress">
                    <div class="progress-bar" style="width: 25%;"></div>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon revenue-icon">
                    <i class="fas fa-coins"></i>
                </div>
                <div class="stat-details">
                    <h3>$240</h3>
                    <p>Today's Revenue</p>
                </div>
                <div class="stat-progress">
                    <div class="progress-bar" style="width: 70%;"></div>
                </div>
            </div>
        </div>

        <div class="report-overview">
            <div class="report-card">
                <div class="report-card-icon sales">
                    <i class="fas fa-coins"></i>
                </div>
                <div class="report-card-info">
                    <h3>Total Sales</h3>
                    <p class="amount">₱152,450.00</p>
                    <p class="trend positive"><i class="fas fa-arrow-up"></i> 12.5%</p>
                </div>
            </div>

            <div class="report-card">
                <div class="report-card-icon orders">
                    <i class="fas fa-shopping-cart"></i>
                </div>
                <div class="report-card-info">
                    <h3>Orders</h3>
                    <p class="amount">385</p>
                    <p class="trend positive"><i class="fas fa-arrow-up"></i> 8.2%</p>
                </div>
            </div>

            <div class="report-card">
                <div class="report-card-icon customers">
                    <i class="fas fa-users"></i>
                </div>
                <div class="report-card-info">
                    <h3>Customers</h3>
                    <p class="amount">42</p>
                    <p class="trend positive"><i class="fas fa-arrow-up"></i> 15.3%</p>
                </div>
            </div>

            <div class="report-card">
                <div class="report-card-icon expenses">
                    <i class="fas fa-file-invoice-dollar"></i>
                </div>
                <div class="report-card-info">
                    <h3>Expenses</h3>
                    <p class="amount">₱62,780.00</p>
                    <p class="trend negative"><i class="fas fa-arrow-up"></i> 5.8%</p>
                </div>
            </div>
        </div>

        <div class="dashboard-grid">
            <!-- Water level card - Fixed HTML -->
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-glass-water"></i> Water Tank Level</h3>
                    <div class="card-actions">
                        <button class="refresh-btn" id="refresh-tank"><i class="fas fa-sync-alt"></i></button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="water-level-container">
                        <div class="water-level">
                            <div class="water" id="water-fill" style="height: 70%;"></div>
                            <div class="level-indicators">
                                <div class="level critical"></div>
                                <div class="level warning"></div>
                                <div class="level good"></div>
                            </div>
                        </div>
                        <div class="water-info">
                            <div class="water-percentage" id="water-percentage">70%</div>
                            <div class="water-status good" id="water-status">
                                <i class="fas fa-check-circle"></i> Good Level
                            </div>
                            <button class="refill-btn" id="refill-tank">Refill Tank</button>
                        </div>
                    </div>
                </div>
            </div>





            <!-- Sales summary card -->
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-chart-bar"></i> Today's Sales</h3>
                    <div class="card-actions">
                        <div class="date-selector">
                            <button class="date-btn active">Day</button>
                            <button class="date-btn">Week</button>
                            <button class="date-btn">Month</button>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="sales-chart">
                        <div class="chart-bar" style="height: 30%;">
                            <div class="bar-label">Mineral</div>
                        </div>
                        <div class="chart-bar" style="height: 50%;">
                            <div class="bar-label">Purified</div>
                        </div>
                        <div class="chart-bar" style="height: 15%;">
                            <div class="bar-label">Alkaline</div>
                        </div>
                        <div class="chart-bar" style="height: 15%;">
                            <div class="bar-label">Kanjen</div>
                        </div>
                    </div>
                    <div class="sales-summary">
                        <div class="sales-item">
                            <div class="sales-label">Mineral Water</div>
                            <div class="sales-value">15 gallons</div>
                        </div>
                        <div class="sales-item">
                            <div class="sales-label">Purified Water</div>
                            <div class="sales-value">23 gallons</div>
                        </div>
                        <div class="sales-item">
                            <div class="sales-label">Alkaline Water</div>
                            <div class="sales-value">8 gallons</div>
                        </div>
                        <div class="sales-item">
                            <div class="sales-label">Kanjen Water</div>
                            <div class="sales-value">8 gallons</div>
                        </div>
                        <div class="sales-item total">
                            <div class="sales-label">Total</div>
                            <div class="sales-value">46 gallons</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sales Overview Chart Section (moved from reports.html) -->
        <div class="report-section" style="margin-top: 40px; background: #fff; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.07);">
            <div class="section-header">
                <h3>Sales Overview</h3>
                <div class="section-actions">
                    <select class="report-filter" id="salesFilter">
                        <option value="daily">Daily</option>
                        <option value="weekly">Weekly</option>
                        <option value="monthly" selected>Monthly</option>
                        <option value="yearly">Yearly</option>
                    </select>
                </div>
            </div>
            <div class="chart-container" style="height: 350px;">
                <canvas id="salesChart"></canvas>
            </div>
        </div>

        <!-- Chart.js library -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script>
        // Sales Overview Chart (interactive)
        document.addEventListener('DOMContentLoaded', function () {
            const salesCtx = document.getElementById('salesChart').getContext('2d');
            const salesData = {
                daily: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    data: [12000, 14500, 11000, 17000, 16000, 21000, 19500],
                    title: 'Sales (This Week)'
                },
                weekly: {
                    labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                    data: [65000, 72000, 69000, 74000],
                    title: 'Sales (This Month)'
                },
                monthly: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                    data: [112500, 118900, 135600, 152450, 140000, 145000, 148000, 152000, 158500, 163000, 172500, 178000],
                    title: 'Sales (2025)'
                },
                yearly: {
                    labels: ['2021', '2022', '2023', '2024', '2025'],
                    data: [950000, 1020000, 1105000, 1200000, 1350000],
                    title: 'Sales (Yearly)'
                }
            };

            let currentType = 'monthly';
            let chart = new Chart(salesCtx, {
                type: 'bar',
                data: {
                    labels: salesData[currentType].labels,
                    datasets: [{
                        label: 'Sales',
                        data: salesData[currentType].data,
                        backgroundColor: 'rgba(2, 136, 209, 0.7)',
                        borderColor: 'rgba(2, 136, 209, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        title: {
                            display: true,
                            text: salesData[currentType].title,
                            font: { size: 16 }
                        },
                        tooltip: {
                            callbacks: {
                                label: function (context) {
                                    return '₱' + context.parsed.y.toLocaleString();
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function (value) {
                                    return '₱' + value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });

            document.getElementById('salesFilter').addEventListener('change', function () {
                currentType = this.value;
                chart.data.labels = salesData[currentType].labels;
                chart.data.datasets[0].data = salesData[currentType].data;
                chart.options.plugins.title.text = salesData[currentType].title;
                chart.update();
            });
        });
        </script>
    </div>
 
    <script>
        // Set current date
        document.getElementById('current-date').textContent = new Date().toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });

        // JavaScript functionality
        function placeOrder() {
            // Get form values
            const clientName = document.getElementById('client-name').value;
            const waterType = document.getElementById('water-type').value;
            const quantity = document.getElementById('quantity').value;
            const deliveryDate = document.getElementById('delivery-date').value;

            if (!clientName || !quantity || !deliveryDate) {
                alert('Please fill in all fields');
                return;
            }

            // In a real application, you would send this data to a server
            alert(`Order placed successfully!\nClient: ${clientName}\nWater Type: ${waterType}\nQuantity: ${quantity} gallons\nDelivery Date: ${deliveryDate}`);

            // Clear form
            document.getElementById('client-name').value = '';
            document.getElementById('quantity').value = '1';
            document.getElementById('delivery-date').value = '';

            // Update water level (simulated)
            updateWaterLevel(Math.max(0, parseInt(document.getElementById('water-fill').style.height) - 5));
        }

        function updateWaterLevel(percentage) {
            document.getElementById('water-fill').style.height = percentage + '%';
            document.querySelector('.water-percentage').textContent = percentage + '%';

            // Update water status based on percentage
            const waterStatus = document.querySelector('.water-status');
            if (percentage < 20) {
                waterStatus.textContent = '';
                waterStatus.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Critical Level';
                waterStatus.className = 'water-status critical';
            } else if (percentage < 40) {
                waterStatus.textContent = '';
                waterStatus.innerHTML = '<i class="fas fa-exclamation-circle"></i> Low Level';
                waterStatus.className = 'water-status low';
            } else {
                waterStatus.textContent = '';
                waterStatus.innerHTML = '<i class="fas fa-check-circle"></i> Good Level';
                waterStatus.className = 'water-status good';
            }
        }
    </script>
</body>
</html>